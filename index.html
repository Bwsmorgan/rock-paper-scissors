<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="javascript" src="./rps.js"></script>
</head>
<body>
    <button id="rock">ROCK</button>
    <button id="paper">PAPER</button>
    <button id="scissors">SCISSORS</button>

    <div id="results">
        SCORE
    </div>
    <script>

        const result = document.querySelector('#results');
        results.setAttribute('style', 'border: solid red 2px; color: green');

        const button = document.querySelectorAll('button');


        button.forEach((button) => {

            button.addEventListener('click', function(e) {

                playRound((e.target).id, getComputerChoice());
                console.log((e.target).id);
                
            })

        })
        

        function getComputerChoice() {

            var choices = ["rock","paper","scissors"];
            var computerChoice = choices[Math.floor(Math.random()*choices.length)];
            return computerChoice;

        }

        //console.log(getComputerChoice());

       // const playerSelection = prompt("Choose: rock, paper or scissors", "Enter your pick here");
        //var computerSelection = getComputerChoice();
        //console.log(game());

        function playRound (playerSelection, computerSelection = getComputerChoice()) {
            
            if (playerSelection.toLowerCase() === computerSelection) {
                //return ("Tie Game!");
                return "tie";
            }

            else if (playerSelection.toLowerCase() === "rock" && computerSelection === "scissors") {
                //return (`You Win! ${playerSelection.toLowerCase()} beats ${computerSelection}`);
                return "win";
            }

            else if (playerSelection.toLowerCase() === "paper" && computerSelection === "rock") {
                //return (`You Win! ${playerSelection.toLowerCase()} beats ${computerSelection}`);
                return "win";
            }

            else if (playerSelection.toLowerCase() === "scissors" && computerSelection === "paper") {
                //return (`You Win! ${playerSelection.toLowerCase()} beats ${computerSelection}`);
                return "win";
            }
            else {
                //return (`You Lose! ${computerSelection} beats ${playerSelection.toLowerCase()}`);
                return "lose";
            }
        }

        function game() {

            var playerScore = 0;
            var computerScore = 0;
            
            //Need to play a new Round each time we go through the loop which is why we call gameOutcome inside the loop
            
            for (let i=0; i<5; i++) {

                var gameOutcome = playRound(playerSelection, computerSelection = getComputerChoice());

                if(gameOutcome === "tie"){

                    playerScore += 0;
                    computerScore += 0;
                    console.log(`${playerSelection},${computerSelection}`)
                    console.log(`${playerScore},${computerScore}`)
                }

                else if(gameOutcome === "win"){

                    playerScore += 1;
                    console.log(`${playerSelection},${computerSelection}`)
                    console.log(`${playerScore},${computerScore}`)
                }
                else{

                    computerScore += 1;
                    console.log(`${playerSelection},${computerSelection}`)
                    console.log(`${playerScore},${computerScore}`)
                }
            }

            const result = (playerScore > computerScore) ? "You win!" : (playerScore === computerScore) ? "Tie!" : "Computer won!";
            
            return result;
            console.log(`${playerScore},${computerScore}`)
        }

    </script>
    
</body>
</html>